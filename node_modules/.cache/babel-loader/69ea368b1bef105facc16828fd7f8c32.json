{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Asus\\\\Documents\\\\GitHub\\\\IntercomBL\\\\WebManangerServer\\\\cliente\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Asus\\\\Documents\\\\GitHub\\\\IntercomBL\\\\WebManangerServer\\\\cliente\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Asus\\\\Documents\\\\GitHub\\\\IntercomBL\\\\WebManangerServer\\\\cliente\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';//import {v4 as uuid} from 'uuid';\nimport proyectoContext from'./proyectoContext';import proyectoReducer from'./proyectoReducer';import{FORMULARIO_PROYECTO,OBTENER_PROYECTOS,AGREGAR_PROYECTO,VALIDAR_FORMULARIO,PROYECTO_ACTUAL,ELIMINAR_PROYECTO,PROYECTO_ERROR}from'../../types';import clienteAxios from'../../config/axios';var ProyectoState=function ProyectoState(props){/*\r\n    const proyectos = [\r\n        {id:1, nombre: 'Estudio1'},\r\n        {id:2, nombre: 'MASTER CH 10'},\r\n        {id:3, nombre: 'TOM'}\r\n    ]*/var initialState={proyectos:[],formulario:false,errorformulario:false,proyecto:null,mensaje:null};var _useReducer=useReducer(proyectoReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//serie de funciones para el CRUD\nvar mostrarFormulario=function mostrarFormulario(){dispatch({type:FORMULARIO_PROYECTO});};//obtner proyectos \nvar obtenerProyectos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get('/api/proyectos');case 3:resultado=_context.sent;dispatch({type:OBTENER_PROYECTOS,payload:resultado.data.proyectos});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerProyectos(){return _ref.apply(this,arguments);};}();//Agregar nuevo Proyecto\nvar agregarProyecto=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(proyecto){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('/api/proyectos',proyecto);case 3:resultado=_context2.sent;console.log(resultado);//INsertar el proyecto en el state \ndispatch({type:AGREGAR_PROYECTO,payload:resultado.data});_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function agregarProyecto(_x){return _ref2.apply(this,arguments);};}();//VALIDAR EL FORMULARIO\nvar mostrarError=function mostrarError(){dispatch({type:VALIDAR_FORMULARIO});};//selecciona el proyecto que el usuario dio click\nvar proyectoActual=function proyectoActual(proyectoId){dispatch({type:PROYECTO_ACTUAL,payload:proyectoId});};//Eliminar un proyecto\nvar eliminarProyecto=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(proyectoId){var alerta;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/proyectos/\".concat(proyectoId));case 3:dispatch({type:ELIMINAR_PROYECTO,payload:proyectoId});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarProyecto(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(proyectoContext.Provider,{value:{proyectos:state.proyectos,formulario:state.formulario,errorformulario:state.errorformulario,proyecto:state.proyecto,mensaje:state.mensaje,mostrarFormulario:mostrarFormulario,obtenerProyectos:obtenerProyectos,agregarProyecto:agregarProyecto,mostrarError:mostrarError,proyectoActual:proyectoActual,eliminarProyecto:eliminarProyecto}},props.children);};export default ProyectoState;","map":{"version":3,"sources":["C:/Users/Asus/Documents/GitHub/IntercomBL/WebManangerServer/cliente/src/context/proyectos/proyectoState.js"],"names":["React","useReducer","proyectoContext","proyectoReducer","FORMULARIO_PROYECTO","OBTENER_PROYECTOS","AGREGAR_PROYECTO","VALIDAR_FORMULARIO","PROYECTO_ACTUAL","ELIMINAR_PROYECTO","PROYECTO_ERROR","clienteAxios","ProyectoState","props","initialState","proyectos","formulario","errorformulario","proyecto","mensaje","state","dispatch","mostrarFormulario","type","obtenerProyectos","get","resultado","payload","data","alerta","msg","categoria","agregarProyecto","post","console","log","mostrarError","proyectoActual","proyectoId","eliminarProyecto","delete","children"],"mappings":"+kBAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,KAAgC,OAAhC,CACA;AACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAAQC,mBAAR,CACQC,iBADR,CAEQC,gBAFR,CAGQC,kBAHR,CAIQC,eAJR,CAKQC,iBALR,CAMQC,cANR,KAOW,aAPX,CAQA,MAAOC,CAAAA,YAAP,KAAyB,oBAAzB,CAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,KAAK,CAAI,CAC/B;;;;;OAMI,GAAMC,CAAAA,YAAY,CAAG,CAChBC,SAAS,CAAG,EADI,CAIjBC,UAAU,CAAG,KAJI,CAKjBC,eAAe,CAAE,KALA,CAMjBC,QAAQ,CAAE,IANO,CAOjBC,OAAO,CAAE,IAPQ,CAArB,CAP2B,gBAiBDlB,UAAU,CAACE,eAAD,CAAkBW,YAAlB,CAjBT,4CAiBpBM,KAjBoB,iBAiBbC,QAjBa,iBAkB3B;AACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5BD,QAAQ,CAAC,CACLE,IAAI,CAAEnB,mBADD,CAAD,CAAR,CAGH,CAJD,CAMA;AACA,GAAMoB,CAAAA,gBAAgB,0FAAE,8LAEQb,CAAAA,YAAY,CAACc,GAAb,CAAiB,gBAAjB,CAFR,QAEVC,SAFU,eAGhBL,QAAQ,CAAC,CACLE,IAAI,CAAElB,iBADD,CAELsB,OAAO,CAAED,SAAS,CAACE,IAAV,CAAeb,SAFnB,CAAD,CAAR,CAHgB,+EAQVc,MARU,CAQF,CACVC,GAAG,CAAE,eADK,CAEVC,SAAS,CAAE,cAFD,CARE,CAYhBV,QAAQ,CAAC,CACLE,IAAI,CAAEb,cADD,CAELiB,OAAO,CAAEE,MAFJ,CAAD,CAAR,CAZgB,oEAAF,kBAAhBL,CAAAA,gBAAgB,0CAAtB,CAmBA;AACA,GAAMQ,CAAAA,eAAe,2FAAG,kBAAMd,QAAN,mLAKQP,CAAAA,YAAY,CAACsB,IAAb,CAAkB,gBAAlB,CAAoCf,QAApC,CALR,QAKVQ,SALU,gBAMhBQ,OAAO,CAACC,GAAR,CAAYT,SAAZ,EACA;AACAL,QAAQ,CAAC,CACLE,IAAI,CAAEjB,gBADD,CAELqB,OAAO,CAAED,SAAS,CAACE,IAFd,CAAD,CAAR,CARgB,mFAaVC,MAbU,CAaF,CACVC,GAAG,CAAE,eADK,CAEVC,SAAS,CAAE,cAFD,CAbE,CAiBhBV,QAAQ,CAAC,CACLE,IAAI,CAAEb,cADD,CAELiB,OAAO,CAAEE,MAFJ,CAAD,CAAR,CAjBgB,sEAAH,kBAAfG,CAAAA,eAAe,6CAArB,CAuBA;AACA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBf,QAAQ,CAAC,CACLE,IAAI,CAAEhB,kBADD,CAAD,CAAR,CAGH,CAJD,CAKA;AACA,GAAM8B,CAAAA,cAAc,CAAE,QAAhBA,CAAAA,cAAgB,CAAAC,UAAU,CAChC,CACIjB,QAAQ,CAAC,CACLE,IAAI,CAAEf,eADD,CAELmB,OAAO,CAAEW,UAFJ,CAAD,CAAR,CAIH,CAND,CAOA;AACA,GAAMC,CAAAA,gBAAgB,2FAAG,kBAAMD,UAAN,yKAEX3B,CAAAA,YAAY,CAAC6B,MAAb,0BAAsCF,UAAtC,EAFW,QAGjBjB,QAAQ,CAAC,CACLE,IAAI,CAAEd,iBADD,CAELkB,OAAO,CAAEW,UAFJ,CAAD,CAAR,CAHiB,mFASXT,MATW,CASH,CACVC,GAAG,CAAE,eADK,CAEVC,SAAS,CAAE,cAFD,CATG,CAajBV,QAAQ,CAAC,CACLE,IAAI,CAAEb,cADD,CAELiB,OAAO,CAAEE,MAFJ,CAAD,CAAR,CAbiB,sEAAH,kBAAhBU,CAAAA,gBAAgB,8CAAtB,CAoBA,mBACI,oBAAC,eAAD,CAAiB,QAAjB,EACA,KAAK,CAAE,CACHxB,SAAS,CAAEK,KAAK,CAACL,SADd,CAEHC,UAAU,CAAEI,KAAK,CAACJ,UAFf,CAGHC,eAAe,CAAEG,KAAK,CAACH,eAHpB,CAIHC,QAAQ,CAAEE,KAAK,CAACF,QAJb,CAKHC,OAAO,CAAEC,KAAK,CAACD,OALZ,CAMHG,iBAAiB,CAAjBA,iBANG,CAOHE,gBAAgB,CAAhBA,gBAPG,CAQHQ,eAAe,CAAfA,eARG,CASHI,YAAY,CAAZA,YATG,CAUHC,cAAc,CAAdA,cAVG,CAWHE,gBAAgB,CAAhBA,gBAXG,CADP,EAcK1B,KAAK,CAAC4B,QAdX,CADJ,CAkBH,CA1HD,CA4HA,cAAe7B,CAAAA,aAAf","sourcesContent":["import React, {useReducer} from 'react';\r\n//import {v4 as uuid} from 'uuid';\r\nimport proyectoContext from './proyectoContext';\r\nimport proyectoReducer from './proyectoReducer';\r\nimport {FORMULARIO_PROYECTO,\r\n        OBTENER_PROYECTOS,\r\n        AGREGAR_PROYECTO,\r\n        VALIDAR_FORMULARIO,\r\n        PROYECTO_ACTUAL,\r\n        ELIMINAR_PROYECTO,\r\n        PROYECTO_ERROR\r\n    } from '../../types';\r\nimport clienteAxios from '../../config/axios';\r\n\r\n\r\nconst ProyectoState = props => {\r\n/*\r\n    const proyectos = [\r\n        {id:1, nombre: 'Estudio1'},\r\n        {id:2, nombre: 'MASTER CH 10'},\r\n        {id:3, nombre: 'TOM'}\r\n    ]*/\r\n    const initialState = {\r\n         proyectos : [\r\n            \r\n        ],\r\n        formulario : false,\r\n        errorformulario: false,\r\n        proyecto: null,\r\n        mensaje: null\r\n    }\r\n\r\n    const [state, dispatch] = useReducer(proyectoReducer, initialState)\r\n    //serie de funciones para el CRUD\r\n    const mostrarFormulario = () => {\r\n        dispatch({\r\n            type: FORMULARIO_PROYECTO\r\n        })\r\n    }\r\n\r\n    //obtner proyectos \r\n    const obtenerProyectos= async () => {\r\n        try {\r\n            const resultado = await clienteAxios.get('/api/proyectos');\r\n            dispatch({\r\n                type: OBTENER_PROYECTOS,\r\n                payload: resultado.data.proyectos\r\n            })\r\n        } catch (error) {\r\n            const alerta= {\r\n                msg: 'Hubo un error',\r\n                categoria: 'alerta-error'\r\n            }\r\n            dispatch({\r\n                type: PROYECTO_ERROR,\r\n                payload: alerta\r\n            })\r\n        }\r\n        \r\n    }\r\n    //Agregar nuevo Proyecto\r\n    const agregarProyecto = async proyecto => {\r\n       /* proyecto.id = uuid();\r\n        \r\n        */\r\n        try {\r\n            const resultado = await clienteAxios.post('/api/proyectos', proyecto);\r\n            console.log(resultado);\r\n            //INsertar el proyecto en el state \r\n            dispatch({\r\n                type: AGREGAR_PROYECTO,\r\n                payload: resultado.data\r\n            })\r\n        } catch (error) {\r\n            const alerta= {\r\n                msg: 'Hubo un error',\r\n                categoria: 'alerta-error'\r\n            }\r\n            dispatch({\r\n                type: PROYECTO_ERROR,\r\n                payload: alerta\r\n            })\r\n        }\r\n    }\r\n    //VALIDAR EL FORMULARIO\r\n    const mostrarError = () => {\r\n        dispatch({\r\n            type: VALIDAR_FORMULARIO\r\n        })\r\n    }\r\n    //selecciona el proyecto que el usuario dio click\r\n    const proyectoActual= proyectoId => \r\n    {\r\n        dispatch({\r\n            type: PROYECTO_ACTUAL,\r\n            payload: proyectoId\r\n        })\r\n    }\r\n    //Eliminar un proyecto\r\n    const eliminarProyecto = async proyectoId => {\r\n        try {\r\n            await clienteAxios.delete(`/api/proyectos/${proyectoId}`);\r\n            dispatch({\r\n                type: ELIMINAR_PROYECTO,\r\n                payload: proyectoId\r\n            })\r\n            \r\n        } catch (error) {\r\n            const alerta= {\r\n                msg: 'Hubo un error',\r\n                categoria: 'alerta-error'\r\n            }\r\n            dispatch({\r\n                type: PROYECTO_ERROR,\r\n                payload: alerta\r\n            })\r\n        }\r\n        \r\n    }\r\n    return(\r\n        <proyectoContext.Provider\r\n        value={{\r\n            proyectos: state.proyectos,\r\n            formulario: state.formulario,\r\n            errorformulario: state.errorformulario,\r\n            proyecto: state.proyecto,\r\n            mensaje: state.mensaje,\r\n            mostrarFormulario,\r\n            obtenerProyectos,\r\n            agregarProyecto,\r\n            mostrarError,\r\n            proyectoActual,\r\n            eliminarProyecto\r\n        }}>\r\n            {props.children}\r\n        </proyectoContext.Provider>\r\n    )\r\n}\r\n\r\nexport default ProyectoState;"]},"metadata":{},"sourceType":"module"}